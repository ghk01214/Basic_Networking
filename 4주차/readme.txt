node.cpp

do_node 함수는 무한루프를 돌면서 NIC에 전송 명령을 전달하거나 사용자 입력을 대기한다.
send_message 함수는 문자열의 문자들을 1비트씩 전송한다.
recieve_message 함수는 전송된 문자들을 1비트씩 받아서 문자를 조립한다.
do_node_nic 함수는
문자 전송 시에는 문자의 전송 시작을 알리는 1을 처음 전송한다.
다음으로 문자 1개를 1비트씩 쪼개서 전송한다. 그리고 해당 문자 전송이 끝났음을 알리는 0을 전송한다.
문자는 수신노드 정보, 송신노드 정보, 메세지, 전송 종료 알림용 공백 순으로 보낸다.
메세지를 전송하고 나면 전송한 메세지를 담고 있는 변수를 초기화시키고 NIC의 상태를 변경한다.

문자 수신 시에는 문자가 전송됨을 알리는 1비트를 받아서 read 변수를 true로 바꿔서 문자들을 읽어들이기 시작한다. 이후 문자들을 받아들인다.
문자열의 마지막에 공백이 들어가있고 해당 문자열의 도착지와 노드 id가 일치하면 문자열을 출력하고 일치하지 않으면 문자열을 초기화한다.

hub.cpp
do_hub 함수는 NIC를 초기화하고 나면 무한루프를 돈다.
send_message 함수는 node.cpp의 것을 이용한다.
recieve_message 함수는 node.cpp의 것을 약간 변형하여 사용한다.
do_hub_NIC 함수는
문자 전송 시에는 문자열의 도착지가 NIC와 1:1로 연결된 노드이면 노드를 향해 문자를 1비트씩 쪼개서 전송한다.
문자열의 도착지가 NIC와 1:1로 연결된 노드가 아니라면 문자열을 해당 노드와 1:1로 연결된 NIC의 queue에 push한다.
이후 문자열을 초기화하고 NIC의 상태를 변경한다.

문자 수신 시에는 문자열이 노드로부터 온 것이면 do_node_nic와 같은 방식으로 문자를 받아들인다.
만약 문자열이 NIC의 queue에 들어있으면 queue의 맨 앞에 있는 문자열을 NIC의 문자열로 치환하고 queue의 front를 pop한다.